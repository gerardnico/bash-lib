#!/usr/bin/env bash
# @name print env information

# Add bash lib in the path
if [ "${BASH_LIB_PATH:-}" == "" ]; then
  SCRIPT_DIR="$(cd "$(dirname "$(readlink -f "${BASH_SOURCE[0]}" || echo "${BASH_SOURCE[0]}")")" && pwd)"
  BASH_LIB_PATH="$SCRIPT_DIR/../lib"
fi
export PATH="$BASH_LIB_PATH:$PATH"

# Add version
# The version is latter injected at install time in the script header
PROJECT_VERSION=${PROJECT_VERSION:-latest}

# shellcheck source=./bashlib-error.sh
source "bashlib-error.sh"
error::set_strict_mode
error::set_trap
# shellcheck source=./bashlib-echo.sh
source "bashlib-echo.sh"
# shellcheck source=./bashlib-doc.sh
source "bashlib-doc.sh"

function synopsis() {

  cat << 'EOF'
```bash
bashlib-env
```
EOF

}

while [[ $# -gt 0 ]]; do
  case "$1" in
    "-h" | "--help" | "help")
      doc::help
      exit
      ;;
    "synopsis")
      synopsis
      exit
      ;;
    -v | --version)
      echo "Version: $PROJECT_VERSION"
      ;;
    *)
      echo::err "No Argument is expected"
      exit 1
      ;;
  esac
done

echo "Interactive : $(if bash::is_interactive; then echo "Yes"; else echo "No"; fi)"
echo "Login       : $(if bash::is_login; then echo "Yes"; else echo "No"; fi)"
echo "BASH_ENV    : ${BASH_ENV:-}"
echo "BASHLIB_LIBRARY_PATH    : ${BASHLIB_LIBRARY_PATH:-}"
echo "PATH    : "
echo "$PATH" | tr ':' $'\n' | sort | string::add_marge
